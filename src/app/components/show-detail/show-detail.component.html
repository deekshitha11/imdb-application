<div class="detail-view-container">
    <app-loading *ngIf="loading"></app-loading>
    <div class="header-container d-flex flex-column" *ngIf="!loading && item">
        <div class="show-info d-flex flex-column">
            <div class="show-header">
                <h1 class="pt-5 pb-0">{{item.name}}</h1>
                <span>{{item.first_air_date | date: 'yyyy'}}</span>
                <span>{{item.number_of_seasons}} Seasons</span>
                <span><i class="bi bi-star-fill"></i>&nbsp;{{item.vote_average}}</span>
            </div>
            <div class="show-footer">
                <p class="pt-3">{{item.overview}}</p>
                <button class="btn-trailer">Watch Trailer</button>
            </div>
        </div>
        <div class="show-backdrop" [style.background-image]="getBackgroundUrl(item.backdrop_path)"></div>
    </div>
    <div class="show-details-container d-flex flex-row pt-5 pl-5 pr-5" *ngIf="!loading && item">
        <div class="poster-area">
            <img src="{{getPosterUrl(item.poster_path)}}">
        </div>
        <div class="details-area d-flex flex-column pl-5 pr-5">
            <div class="plot">
                <h2>Plot</h2>
                <p>{{item.overview}}</p>
            </div>
            <ul class="details-list pl-0">
                <li class="detail-row">
                    <span class="label">Release date:</span>
                    <span class="value">{{item.first_air_date | date : 'mediumDate'}}</span>
                </li>
                <li class="detail-row">
                    <span class="label">Seasons:</span>
                    <span class="value">{{item.number_of_seasons}}</span>
                </li>
                <li class="detail-row">
                    <span class="label">Episodes:</span>
                    <span class="value">{{item.number_of_episodes}}</span>
                </li>
                <li class="detail-row">
                    <span class="label">Score:</span>
                    <span class="value"><i class="bi bi-star-fill"></i>&nbsp;{{item.vote_average}} ({{item.vote_count}})</span>
                </li>
            </ul>
            <div class="genre-list">
                <button class="btn-genre mb-2" *ngFor="let genre of item.genres" routerLink="/genres/{{genre.id}}/{{genre.name}}">{{genre.name}}</button>
            </div>
        </div>
    </div>
    <div class="cast-container pt-5" *ngIf="credits.length > 0  && !loading">
        <h2 class="pl-3 pb-3">Cast</h2>
        <p-carousel [value]="credits"
            [numVisible]="6" 
            [numScroll]="6" 
            [responsiveOptions]="responsiveOptions" 
            [showIndicators]="false">
            <ng-template let-actor pTemplate="item">
                <app-card [item]="actor" [type]="'actors'" [isPerson]="true"></app-card>
            </ng-template>
        </p-carousel>
    </div>
    <div class="carousel-container pt-5 pb-5" *ngIf="similarShows && !loading">
        <h2 class="pl-3 pb-3">Similar TV Shows</h2>
        <p-carousel [value]="similarShows!"
            [numVisible]="6" 
            [numScroll]="6" 
            [responsiveOptions]="responsiveOptions" 
            [showIndicators]="false">
            <ng-template let-show pTemplate="item">
                <app-card [item]="show" [type]="'shows'"></app-card>
            </ng-template>
        </p-carousel>
    </div>
</div>
